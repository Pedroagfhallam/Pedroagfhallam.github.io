<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Madeira Island - A Paradise in Portugal</title>
    
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Your Custom Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-light text-dark">
    <a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>

    <div class="container py-4">
        <header class="text-center mb-4" role="banner">
            <h1 class="display-5">Welcome to Madeira Island</h1>
            <p class="lead">Madeira is a breathtaking Portuguese island known for its lush landscapes, stunning coastline, and rich culture.</p>
        </header>

        <main id="main-content" role="main">
            <!-- Image with Bootstrap tooltip -->
            <div class="text-center mb-4">
                <img src="https://i.imgur.com/BT31tDS.jpg" alt="Aerial view of Madeira Island" class="img-fluid rounded shadow" data-bs-toggle="tooltip" title="Scenic view of Madeira Island">
            </div>

            <!-- About and Attractions Section -->
            <div class="row mb-4">
                <section class="col-md-6">
                    <h2>About Madeira</h2>
                    <p>Located in the Atlantic Ocean, Madeira is an autonomous region of Portugal. Known for its dramatic cliffs, lush greenery, and volcanic origins, the island is a top travel destination.</p>
                </section>
                <section class="col-md-6">
                    <h2>Top Attractions</h2>
                    <ul class="list-group">
                        <li class="list-group-item"><strong>Pico Ruivo:</strong> The highest peak on the island.</li>
                        <li class="list-group-item"><strong>Funchal:</strong> The vibrant capital with markets and gardens.</li>
                        <li class="list-group-item"><strong>Levada Walks:</strong> Trails along old irrigation channels.</li>
                        <li class="list-group-item"><strong>Porto Moniz:</strong> Volcanic swimming pools.</li>
                        <li class="list-group-item"><strong>Monte Palace Garden:</strong> Exotic botanical garden.</li>
                        <li class="list-group-item"><strong>Cabo Girão:</strong> One of Europe’s highest sea cliffs.</li>
                    </ul>
                </section>
            </div>

            <!-- Weather Section -->
            <section class="mb-4">
                <h2>Check the Weather in Madeira</h2>
                <div class="mb-3">
                    <label for="weather-location" class="form-label">Choose a location:</label>
                    <div class="dropdown-container d-flex justify-content-center my-3">
                        <select id="weather-location" class="form-select w-auto text-center">
                        <option value="">-- Select a location --</option>
                        <option value="Funchal">Funchal</option>
                        <option value="Machico">Machico</option>
                        <option value="Santa Cruz">Santa Cruz</option>
                        <option value="Câmara de Lobos">Câmara de Lobos</option>
                        <option value="Santana">Santana</option>
                        <option value="São Vicente">São Vicente</option>
                        <option value="Calheta">Calheta</option>
                        <option value="Ponta do Sol">Ponta do Sol</option>
                        <option value="Porto Moniz">Porto Moniz</option>
                        <option value="Ribeira Brava">Ribeira Brava</option>
                    </select>
                    </div>
                </div>
                <div id="weather-info" class="alert alert-info d-none"></div>
            </section>

            <!-- Favorite Attraction Section -->
            <section class="mb-4">
                <h2>Tell us your favorite attraction in Madeira</h2>
                <div class="mb-3">
                    <label for="attraction-select" class="form-label">Choose an attraction:</label>
                    <div class="dropdown-container d-flex justify-content-center my-3">
                        <select id="attraction-select" class="form-select w-auto text-center">
                        <option value="">-- Select an attraction --</option>
                        <option value="Pico Ruivo">Pico Ruivo</option>
                        <option value="Funchal">Funchal</option>
                        <option value="Levada Walks">Levada Walks</option>
                        <option value="Porto Moniz">Porto Moniz</option>
                        <option value="Monte Palace Garden">Monte Palace Garden</option>
                        <option value="Cabo Girão">Cabo Girão</option>
                    </select>
                    </div>
                </div>
                <div id="attraction-info" class="alert alert-warning d-none"></div>
            </section>

            <p>Visit the <a href="https://www.visitmadeira.com/en/" target="_blank">official Madeira tourism website</a> for more information.</p>
        </main>

        <footer class="text-center mt-5" role="contentinfo">
            <p class="text-muted">&copy; 2025 Madeira Travel Guide</p>
        </footer>
    </div>

    <!-- jQuery and Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
    // Enable Bootstrap tooltips
    $(function () {
        $('[data-bs-toggle="tooltip"]').tooltip();
    });

    // Display greeting based on time
    function displayGreeting() {
        const hour = new Date().getHours();
        let greeting = "Welcome to Madeira Island!";
        if (hour < 12) greeting = "Good morning! Start your day exploring Madeira!";
        else if (hour < 18) greeting = "Good afternoon! Enjoy the beauty of Madeira!";
        else greeting = "Good evening! Experience Madeira's nightlife!";
        $("header h1").text(greeting);
    }

    // Handle attraction dropdown
    function handleAttractionSelection() {
        const attractionDetails = {
            "Pico Ruivo": "The highest peak in Madeira, offering breathtaking views.",
            "Funchal": "The vibrant capital with markets, cable cars, and gardens.",
            "Levada Walks": "Scenic trails ideal for nature lovers.",
            "Porto Moniz": "Natural volcanic pools with crystal-clear water.",
            "Monte Palace Garden": "A botanical garden with exotic plants and koi ponds.",
            "Cabo Girão": "One of Europe's highest cliffs with panoramic views."
        };

        $("#attraction-select").on("change", function () {
            const value = $(this).val();
            if (value) {
                $("#attraction-info").hide().text(attractionDetails[value]).removeClass("d-none").fadeIn();
            } else {
                $("#attraction-info").fadeOut();
            }
        });
    }

    // Handle weather dropdown
    function handleWeatherSelection() {
        const coords = {
            "Funchal": { lat: 32.6669, lon: -16.9241 },
            "Machico": { lat: 32.7161, lon: -16.7669 },
            "Santa Cruz": { lat: 32.6833, lon: -16.7833 },
            "Câmara de Lobos": { lat: 32.6333, lon: -16.9833 },
            "Santana": { lat: 32.8000, lon: -16.8667 },
            "São Vicente": { lat: 32.8000, lon: -17.0333 },
            "Calheta": { lat: 32.7167, lon: -17.1833 },
            "Ponta do Sol": { lat: 32.6833, lon: -17.1000 },
            "Porto Moniz": { lat: 32.8667, lon: -17.1667 },
            "Ribeira Brava": { lat: 32.6833, lon: -17.0667 }
        };

        const descriptions = {
            0: "Clear sky", 1: "Mainly clear", 2: "Partly cloudy", 3: "Overcast",
            45: "Fog", 48: "Depositing rime fog", 51: "Light drizzle",
            53: "Moderate drizzle", 55: "Dense drizzle", 61: "Slight rain",
            63: "Moderate rain", 65: "Heavy rain", 71: "Slight snow",
            73: "Moderate snow", 75: "Heavy snow", 95: "Thunderstorm"
        };

        $("#weather-location").on("change", function () {
            const location = $(this).val();
            if (coords[location]) {
                const { lat, lon } = coords[location];
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;

                $.getJSON(url, function (data) {
                    const weather = data.current_weather;
                    const desc = descriptions[weather.weathercode] || "Unknown";

                    let tempColor = weather.temperature < 15 ? 'text-primary' :
                                    weather.temperature <= 22 ? 'text-warning' : 'text-danger';

                    let windColor = weather.windspeed < 10 ? 'text-success' :
                                    weather.windspeed <= 30 ? 'text-warning' : 'text-danger';

                    $("#weather-info").hide().html(`
                        <strong>${location}</strong><br>
                        <i class="fas fa-thermometer-half ${tempColor}"></i> ${weather.temperature}°C<br>
                        <i class="fas fa-wind ${windColor}"></i> ${weather.windspeed} km/h<br>
                        <i class="fas fa-cloud-sun"></i> ${desc}
                    `).removeClass("d-none").fadeIn();
                }).fail(function () {
                    $("#weather-info").text("Error retrieving weather data.").removeClass("d-none");
                });
            } else {
                $("#weather-info").fadeOut();
            }
        });
    }

    // Init functions on DOM ready
    $(document).ready(function () {
        displayGreeting();
        handleAttractionSelection();
        handleWeatherSelection();
    });
    </script>
</body>
</html>
